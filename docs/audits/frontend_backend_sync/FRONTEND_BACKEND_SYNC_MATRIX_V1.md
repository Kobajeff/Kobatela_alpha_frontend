# FRONTEND_BACKEND_SYNC_MATRIX_V1

## Backend Contract Inventory vs Frontend Usage

| Backend endpoint (METHOD PATH) | Doc source file | Auth mechanism in docs | Expected roles/scopes | Request schema (doc) | Response schema (doc) | Frontend usage status | Frontend call sites | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| POST /auth/login | docs/Backend_info/API_GUIDE (10).md | Public | — | AuthLoginRequest | AuthLoginResponse | USED (scope param ignored) | `useLogin`【F:src/lib/queries/sender.ts†L205-L218】 | UI only sends email; cannot request specific scope (provider/support/advisor). |
| GET /auth/me | docs/Backend_info/API_GUIDE (10).md | API key | sender/provider/admin | — | AuthMeResponse | MISUSED (advisor layout depends on endpoint that blocks advisor) | RequireScope + `useAuthMe`【F:src/app/advisor/layout.tsx†L7-L16】【F:src/lib/queries/sender.ts†L274-L299】 | Backend excludes advisor scope; advisor pages loop/reset on 401/403. |
| GET /me/profile | docs/Backend_info/API_GUIDE (10).md | API key | sender/provider/admin/support | — | UserProfileRead | USED | Profile hooks【F:src/lib/queries/sender.ts†L304-L333】 | No masking on client beyond backend rules. |
| PATCH /me/profile | docs/Backend_info/API_GUIDE (10).md | API key | sender/provider/admin/support | UserProfileUpdate | UserProfileRead | USED | `useUpdateUserProfile`【F:src/lib/queries/sender.ts†L323-L336】 | No client-side validation for required bank/ID fields. |
| POST /users | docs/Backend_info/API_GUIDE (10).md | API key | admin/support | UserCreate | UserRead | UNUSED | — | Endpoint exists in adminApi but not surfaced in UI. |
| POST /admin/users | docs/Backend_info/API_GUIDE (10).md | API key | admin | AdminUserCreate | AdminUserCreateResponse | USED | `createAdminUser`【F:src/lib/adminApi.ts†L19-L38】 | UI surfaces token but no scope warnings. |
| GET /admin/users | docs/Backend_info/API_GUIDE (10).md | API key | admin | Query params | PaginatedResponse[AdminUser] | USED | `getAdminUsers`【F:src/lib/adminApi.ts†L40-L55】 | Pagination aligns. |
| GET /admin/users/{id} | docs/Backend_info/API_GUIDE (10).md | API key | admin | — | AdminUserDetailRead | USED | `getAdminUserById`【F:src/lib/adminApi.ts†L57-L68】 | — |
| GET /admin/users/{id}/api-keys | docs/Backend_info/API_GUIDE (10).md | API key | admin | Query active | list[ApiKeyRead] | USED | `getAdminUserApiKeys`【F:src/lib/adminApi.ts†L70-L82】 | — |
| POST /admin/users/{id}/api-keys | docs/Backend_info/API_GUIDE (10).md | API key | admin | AdminUserApiKeyCreate | AdminUserApiKeyCreateResponse | USED | `issueAdminUserApiKey`【F:src/lib/adminApi.ts†L84-L93】 | — |
| DELETE /admin/users/{id}/api-keys/{api_key_id} | docs/Backend_info/API_GUIDE (10).md | API key | admin | — | 204 | USED | `revokeAdminUserApiKey`【F:src/lib/adminApi.ts†L95-L103】 | — |
| GET /admin/users/{id}/profile | docs/Backend_info/API_GUIDE (10).md | API key | admin/support | — | UserProfileRead | UNUSED | — | UI lacks admin profile view. |
| POST /mandates | docs/Backend_info/API_GUIDE (10).md | API key | sender | UsageMandateCreate | UsageMandateRead | USED | `useCreateMandate`【F:src/lib/queries/sender.ts†L152-L164】 | UI payload omits server-enforced expiry bounds and feature-flag errors. |
| GET /mandates/{id} | docs/Backend_info/API_GUIDE (10).md | API key | sender/provider/support/admin | — | UsageMandateRead | USED | `useMandate`【F:src/lib/queries/sender.ts†L497-L506】 | Only detail fetch; no list view. |
| POST /mandates/cleanup (maintenance) | docs/Backend_info/FRONTEND_API_GUIDE (11).md | API key | sender | — | dict | MISUSED (maintenance endpoint exposed) | `useCleanupMandates`【F:src/lib/queries/sender.ts†L165-L173】 | Backend marks as NOT FOR UI; surfaced on mandate page. |
| GET /escrows | docs/Backend_info/API_GUIDE (10).md | API key | sender/provider/support | Query params | PaginatedResponse[EscrowListItem] or list | USED | `useSenderEscrows`【F:src/lib/queries/sender.ts†L398-L423】 | Admin dashboard reuses without admin scope; provider role not modeled in UI. |
| POST /escrows | docs/Backend_info/API_GUIDE (10).md | API key | sender | EscrowCreate | EscrowRead | USED | `useCreateEscrow`【F:src/lib/queries/sender.ts†L426-L456】 | UI enforces provider/beneficiary XOR; currency/domain validated client-side. |
| GET /escrows/{id}/summary | docs/Backend_info/API_GUIDE (10).md | API key | sender/provider | — | SenderEscrowSummary | USED | Sender/Admin summaries【F:src/lib/queries/sender.ts†L595-L618】【F:src/lib/queries/admin.ts†L700-L741】 | Admin views reuse sender endpoint (no admin-specific fields). |
| GET /escrows/{id}/milestones | docs/Backend_info/API_GUIDE (10).md | API key | sender/provider/admin/support | — | list[MilestoneRead] | USED | `useEscrowMilestones`【F:src/lib/queries/sender.ts†L685-L707】 | Render hides amount for advisor? not enforced client-side. |
| GET /escrows/milestones/{milestone_id} | docs/Backend_info/API_GUIDE (10).md | API key | admin/sender/provider | — | MilestoneRead | USED (detail view) | `useMilestoneDetail`【F:src/lib/queries/sender.ts†L705-L712】 | — |
| POST /escrows/{id}/milestones | docs/Backend_info/API_GUIDE (10).md | API key | admin/support/sender | MilestoneCreate | MilestoneRead | USED | Sender/admin milestone creation【F:src/lib/queries/sender.ts†L459-L495】 | Sender UI allows bulk loop; lacks guard for escrow draft-only rule. |
| POST /escrows/{id}/funding-session | docs/Backend_info/API_GUIDE (10).md | API key | sender/admin | — | FundingSessionRead | USED | `useCreateFundingSession`【F:src/lib/queries/sender.ts†L820-L849】 | CTA only on sender view; admin override not surfaced. |
| POST /escrows/{id}/deposit | docs/Backend_info/API_GUIDE (10).md | API key | sender | EscrowDepositCreate + Idempotency-Key | EscrowRead | USED | `useDepositEscrow`【F:src/lib/queries/sender.ts†L881-L929】 | Retries 500s; no client copy for idempotency requirement. |
| POST /escrows/{id}/mark-delivered /client-approve /client-reject /check-deadline | docs/Backend_info/API_GUIDE (10).md | API key | sender | EscrowActionPayload | EscrowRead | USED | `useEscrowAction`【F:src/lib/queries/sender.ts†L801-L819】 | Actions exposed only in sender view; no status prechecks client-side. |
| POST /files/proofs | docs/Backend_info/API_GUIDE (10).md | API key | sender/provider/support/admin | multipart file | ProofFileUploadResponse | USED | `uploadProofFile` + ProofForm【F:src/lib/apiClient.ts†L110-L139】【F:src/components/sender/ProofForm.tsx†L129-L177】 | No client-side enforcement of escrow_id requirement when needed. |
| POST /proofs | docs/Backend_info/API_GUIDE (10).md | API key | sender/provider/support/admin | ProofCreate | ProofRead | USED | `useCreateProof`【F:src/lib/queries/sender.ts†L1110-L1149】 | Metadata limited to note; invoice/exif metadata not captured. |
| GET /proofs | docs/Backend_info/API_GUIDE (10).md | API key | sender/provider/support/admin/advisor | Query params | PaginatedResponse[ProofDetailRead] | USED | Sender/admin lists【F:src/lib/queries/sender.ts†L74-L120】【F:src/lib/queries/admin.ts†L563-L581】 | Admin queue uses undocumented `review_mode` param instead of `/admin/proofs/review-queue`. |
| GET /proofs/{id} | docs/Backend_info/API_GUIDE (10).md | API key | sender/provider/support/admin/advisor | — | ProofDetailRead | USED | Proof polling【F:src/lib/queries/sender.ts†L999-L1044】 | — |
| POST /proofs/{id}/decision | docs/Backend_info/API_GUIDE (10).md | API key | sender/support/admin | ProofDecision | ProofRead | USED (admin only) | `useAdminProofDecision`【F:src/lib/queries/admin.ts†L219-L230】 | Sender/provider decision UI absent. |
| POST /proofs/{id}/request_advisor_review | docs/Backend_info/API_GUIDE (10).md | API key | sender | — | ProofRead | USED | `useRequestAdvisorReview`【F:src/lib/queries/sender.ts†L1159-L1179】 | No advisor availability messaging beyond error toast. |
| GET /admin/payments | docs/Backend_info/API_GUIDE (10).md | API key | admin/support | Query params | PaginatedResponse[PaymentRead] | USED | `useAdminPayments`【F:src/lib/queries/admin.ts†L165-L214】 | No payout_blocked_reasons surfaced. |
| POST /payments/execute/{payment_id} | docs/Backend_info/API_GUIDE (10).md | API key | admin/support | — | PaymentRead | USED | `useExecutePayment`【F:src/lib/queries/admin.ts†L349-L368】 | Non-idempotent; UI allows retries without status guard. |
| GET/POST /admin/settings/ai-proof | docs/Backend_info/API_GUIDE (10).md | API key | admin | — / query enabled | dict | USED | admin settings hooks【F:src/lib/adminApi.ts†L105-L120】【F:src/lib/queries/admin.ts†L612-L618】 | — |
| Merchant suggestions (sender CRUD) | docs/Backend_info/API_GUIDE (10).md | API key | sender | MerchantSuggestionCreate | MerchantSuggestionRead | USED | sender hooks【F:src/lib/queries/sender.ts†L118-L150】 | — |
| Admin merchant suggestion approve/reject/promote | docs/Backend_info/API_GUIDE (10).md | API key | admin/support | MerchantSuggestionAdminUpdate/Promote | MerchantSuggestionRead | USED | admin hooks【F:src/lib/queries/admin.ts†L382-L424】 | — |
| Admin advisors (list/detail/update/create/assign-sender/overview) | docs/Backend_info/API_GUIDE (10).md | API key | admin | Various schemas | AdvisorProfileRead/List | USED | admin advisor hooks【F:src/lib/queries/admin.ts†L585-L609】【F:src/lib/queries/admin.ts†L878-L940】 | — |
| GET /advisor/me/profile | docs/Backend_info/API_GUIDE (10).md | API key | advisor | — | AdvisorProfileRead | USED | Advisor profile hook【F:src/lib/queries/advisor.ts†L37-L44】 | Depends on /auth/me despite advisor scope gap. |
| GET /advisor/me/proofs | docs/Backend_info/API_GUIDE (10).md | API key | advisor | Query status | list[AdvisorProofItem] | USED | Advisor queue hook【F:src/lib/queries/advisor.ts†L16-L33】 | Polling only; no status filter per backend. |
| Pricing admin endpoints (/admin/pricing/reference/import-csv, /admin/pricing/inflation*) | docs/Backend_info/API_GUIDE (10).md | API key | pricing_admin/risk_admin | CSV or InflationAdjustmentPayload | Import responses / InflationAdjustment | USED | pricing hooks【F:src/lib/queries/pricingAdmin.ts†L21-L74】 | UI lacks feature flag surfacing for PRICING_ADMIN vs RISK_ADMIN. |
| External proof token issuance (/external/proofs/tokens, /external/tokens/beneficiary) | docs/Backend_info/API_GUIDE (10).md | API key | sender/support/admin | ExternalProofTokenRequest | ExternalProofTokenResponse | UNUSED | — | No issuer UI; backend capability idle. |
| POST /external/files/proofs | docs/Backend_info/API_GUIDE (10).md | External token header | token only | multipart file | ExternalProofUploadResponse | USED | external upload hook【F:src/lib/api/externalClient.ts†L15-L47】【F:src/lib/queries/external.ts†L23-L46】 | Accepts both Authorization and X-External-Token; UI stores token in localStorage. |
| POST /external/proofs/submit | docs/Backend_info/API_GUIDE (10).md | External token header | token only | ExternalProofSubmit | ExternalProofSubmitResponse | USED | external submit hook【F:src/lib/api/externalClient.ts†L49-L70】【F:src/lib/queries/external.ts†L48-L68】 | No escrow/milestone override UI (token-only). |
| GET /external/escrows/summary | docs/Backend_info/API_GUIDE (10).md | External token header | token only | — | ExternalEscrowSummary | USED | external summary page【F:src/lib/api/externalClient.ts†L72-L90】【F:src/app/external/escrow/page.tsx†L19-L119】 | Path variant /external/escrows/{id} unused. |
| GET /external/proofs/{id}/status | docs/Backend_info/API_GUIDE (10).md | External token header | token only | — | ExternalProofStatusResponse | USED | external status polling【F:src/lib/api/externalClient.ts†L92-L109】【F:src/lib/queries/external.ts†L70-L133】 | Polling stops after repeated errors; no 5-minute cap as recommended. |
| GET /beneficiaries/{id}, POST /beneficiaries | docs/Backend_info/API_GUIDE (10).md | API key | sender/provider/support/admin/advisor (GET), sender (POST) | BeneficiaryCreate | BeneficiaryProfileRead | UNUSED | — | No beneficiary UI; backend contract idle. |
| GET /alerts | docs/Backend_info/API_GUIDE (10).md | API key | admin/support | Query params | PaginatedResponse[AlertRead] | UNUSED | — | Alerts not surfaced. |
| /kct_public/* endpoints | docs/Backend_info/API_GUIDE (10).md | API key + public user | sender/admin | Various Gov schemas | GovProjectRead/list | UNUSED | — | Not represented in UI. |
| /spend/* endpoints | docs/Backend_info/API_GUIDE (10).md | API key | admin/support/sender | Spend schemas | Various | UNUSED | — | Not represented in UI. |
| /transactions/* endpoints | docs/Backend_info/API_GUIDE (10).md | API key | admin | Transaction schemas | TransactionRead | UNUSED | — | Not represented in UI. |
| /admin/proofs/review-queue, /admin/fraud/score_comparison, /admin/risk-snapshots | docs/Backend_info/API_GUIDE (10).md | API key | admin/support | Various | Various | UNUSED | — | Admin proof queue uses `/proofs?review_mode=review_queue` instead. |
| /sender/dashboard | docs/Backend_info/API_GUIDE (10).md | API key | sender | Query param limit | SenderDashboard | UNUSED (custom implementation) | — | UI builds dashboard via multiple endpoints instead of dedicated route. |

## Frontend calls not found in backend docs (shadow inventory)

| Frontend call pattern | Frontend call sites | Status | Notes |
| --- | --- | --- | --- |
| `/proofs` with `review_mode` query param (review_queue) | Admin proof queue hook【F:src/lib/queries/admin.ts†L563-L581】 | UNDOCUMENTED PARAM | Backend docs specify `/admin/proofs/review-queue`; reliance on query param may break if backend removes alias. |
| `/escrows/{id}/summary` used for admin context | Admin escrow summary hook【F:src/lib/queries/admin.ts†L700-L741】 | PARTIAL | Backend has no admin-specific summary; admin UI may miss redacted fields (psp_ref) without dedicated endpoint. |
