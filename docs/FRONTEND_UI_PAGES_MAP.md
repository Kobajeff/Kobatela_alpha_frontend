# Frontend UI Pages Map

## Changelog
- Admin routes now allow support. `F:src/app/admin/layout.tsx:L22-L56`
- Added `/admin/payments/[id]` (manual execute + polling). `F:src/app/admin/payments/[id]/page.tsx:L1-L294`

## Route map (Next.js App Router)

| Route | Area | Auth | Allowed roles | Guard enforced by | Main components / key hooks | Notes |
|---|---|---|---|---|---|---|
| `/` | public/shared | Public entry; redirects to login when no token and routes authenticated users to the correct dashboard. `F:src/app/page.tsx:L22-L40` | Any visitor can load; authenticated admins go to `/admin/dashboard`, authenticated non-admins go to `/sender/dashboard`. `F:src/app/page.tsx:L33-L39` | Route-level redirect logic in `HomePage` using `getAuthToken` + `useAuthMe`. `F:src/app/page.tsx:L22-L40` | `useAuthMe`, `ErrorAlert`. `F:src/app/page.tsx:L7-L47` | Landing redirect screen only; no standalone UI beyond redirect messaging. `F:src/app/page.tsx:L3-L54` |
| `/login` | auth | Public login form; no prior session required. `F:src/app/login/page.tsx:L3-L65` | Public; post-login navigation branches to admin or sender dashboard based on returned role. `F:src/app/login/page.tsx:L21-L32` | No guard; navigation handled after successful `useLogin` mutation. `F:src/app/login/page.tsx:L21-L35` | `useLogin`, `LoadingState`, `ErrorAlert`. `F:src/app/login/page.tsx:L7-L65` | Collects email, triggers login, and redirects by role. `F:src/app/login/page.tsx:L21-L35` |
| `/admin/dashboard` | admin | Requires authenticated session; unauthenticated users redirected to `/login`. `F:src/app/admin/layout.tsx:L22-L55` | `admin`, `both`, `support`; sender role redirected to `/sender/dashboard`. `F:src/app/admin/layout.tsx:L28-L55` | Admin layout guard (`src/app/admin/layout.tsx`) wraps all admin pages. `F:src/app/admin/layout.tsx:L3-L59` | `useAdminDashboardStatsComputed`, `AdminUserCreator`, `Card`. `F:src/app/admin/dashboard/page.tsx:L4-L72` | Operational stats dashboard with optional access-denied banner. `F:src/app/admin/dashboard/page.tsx:L32-L70` |
| `/admin/escrows/[id]` | admin | Requires authenticated session. `F:src/app/admin/layout.tsx:L22-L55` | `admin`, `both`, `support`; sender redirected away. `F:src/app/admin/layout.tsx:L28-L55` | Admin layout guard. `F:src/app/admin/layout.tsx:L3-L59` | `useAdminEscrowSummary`, `useEscrowMilestones`, `useCreateMilestone`, `ProofAiStatus`, `Badge`, `Button`. `F:src/app/admin/escrows/[id]/page.tsx:L4-L370` | Escrow detail with milestones, proofs, payments, and admin milestone creation. `F:src/app/admin/escrows/[id]/page.tsx:L75-L371` |
| `/admin/payments/[id]` | admin | Requires authenticated session. `F:src/app/admin/layout.tsx:L22-L55` | `admin`, `both`, `support`; sender redirected away. `F:src/app/admin/layout.tsx:L28-L55` | Admin layout guard. `F:src/app/admin/layout.tsx:L3-L59` | `useAdminPayments` (GET `/admin/payments`), `useExecutePayment` (POST `/payments/execute/[id]`), `Badge`, `Button`. `F:src/app/admin/payments/[id]/page.tsx:L7-L294` `F:src/lib/queries/admin.ts:L176-L182` `F:src/lib/queries/admin.ts:L297-L304` | Payment detail with manual execute flow (403/409/422 handling and 409 already-executed messaging), polling that stops on terminal statuses or when the max polling duration times out, and refresh controls. `F:src/app/admin/payments/[id]/page.tsx:L92-L175` `F:src/app/admin/payments/[id]/page.tsx:L101-L134` `F:src/app/admin/payments/[id]/page.tsx:L216-L224` |
| `/admin/senders` | admin | Requires authenticated session. `F:src/app/admin/layout.tsx:L22-L55` | `admin`, `both`, `support`. `F:src/app/admin/layout.tsx:L28-L55` | Admin layout guard. `F:src/app/admin/layout.tsx:L3-L59` | `useAdminSenders`, `LoadingState`, `ErrorAlert`. `F:src/app/admin/senders/page.tsx:L4-L86` | Sender directory with search and status table. `F:src/app/admin/senders/page.tsx:L20-L88` |
| `/admin/senders/[id]` | admin | Requires authenticated session. `F:src/app/admin/layout.tsx:L22-L55` | `admin`, `both`, `support`. `F:src/app/admin/layout.tsx:L28-L55` | Admin layout guard. `F:src/app/admin/layout.tsx:L3-L59` | `useAdminSenderProfile`, `useAdminUserApiKeys`, `useRevokeAdminUserApiKey`, `Card`. `F:src/app/admin/senders/[id]/page.tsx:L4-L173` | Sender profile with API key management and revoke actions. `F:src/app/admin/senders/[id]/page.tsx:L16-L175` |
| `/admin/proofs/review-queue` | admin | Requires authenticated session. `F:src/app/admin/layout.tsx:L22-L55` | `admin`, `both`, `support`. `F:src/app/admin/layout.tsx:L28-L55` | Admin layout guard. `F:src/app/admin/layout.tsx:L3-L59` | `AdminProofReviewTable`, `useAdminProofReviewQueue`, `useAdminProofDecision`, `ForbiddenBanner`. `F:src/app/admin/proofs/review-queue/page.tsx:L5-L107` | Proof review queue with approve/reject actions and forbidden banners. `F:src/app/admin/proofs/review-queue/page.tsx:L15-L107` |
| `/admin/settings/ai-proof` | admin | Requires authenticated session. `F:src/app/admin/layout.tsx:L22-L55` | `admin`, `both`, `support`. `F:src/app/admin/layout.tsx:L28-L55` | Admin layout guard. `F:src/app/admin/layout.tsx:L3-L59` | `useAiProofSetting`, `useUpdateAiProofSetting`, `LoadingState`, `ErrorAlert`. `F:src/app/admin/settings/ai-proof/page.tsx:L3-L58` | Toggle for global AI proof advisor flag. `F:src/app/admin/settings/ai-proof/page.tsx:L19-L58` |
| `/admin/advisors` | admin | Requires authenticated session. `F:src/app/admin/layout.tsx:L22-L55` | `admin`, `both`, `support`. `F:src/app/admin/layout.tsx:L28-L55` | Admin layout guard. `F:src/app/admin/layout.tsx:L3-L59` | `AdvisorOverviewCards`, `AdvisorsTable`, `CreateAdvisorForm`, `useAdminAdvisorsOverview`, `useAdminAdvisorsList`. `F:src/app/admin/advisors/page.tsx:L12-L89` | Advisor workload overview and management actions. `F:src/app/admin/advisors/page.tsx:L62-L89` |
| `/admin/advisors/[id]` | admin | Requires authenticated session. `F:src/app/admin/layout.tsx:L22-L55` | `admin`, `both`, `support`. `F:src/app/admin/layout.tsx:L28-L55` | Admin layout guard. `F:src/app/admin/layout.tsx:L3-L59` | `useAdminAdvisorDetail`, `useAdminAdvisorSenders`, `useAdminAssignSender`, `useAdminUpdateAdvisor`, `Badge`, `Button`, `Card`. `F:src/app/admin/advisors/[id]/page.tsx:L5-L215` | Advisor profile with status toggles and sender assignment. `F:src/app/admin/advisors/[id]/page.tsx:L56-L215` |
| `/sender/dashboard` | sender | Requires authenticated session enforced by sender layout. `F:src/app/sender/layout.tsx:L22-L52` | `sender`, `both`; admins redirected to `/admin/dashboard`. `F:src/app/sender/layout.tsx:L28-L52` | Sender layout guard (`src/app/sender/layout.tsx`). `F:src/app/sender/layout.tsx:L3-L55` | `useSenderDashboard`, `MyAdvisorCard`, `SenderEscrowList`, `StatusBadge`. `F:src/app/sender/dashboard/page.tsx:L5-L108` | Dashboard with advisor card and recent escrows/proofs/payments summaries. `F:src/app/sender/dashboard/page.tsx:L35-L107` |
| `/sender/advisor` | sender | Requires authenticated session enforced by sender layout. `F:src/app/sender/layout.tsx:L22-L52` | `sender`, `both`. `F:src/app/sender/layout.tsx:L28-L52` | Sender layout guard. `F:src/app/sender/layout.tsx:L3-L55` | `useMyAdvisor`, `AdvisorProfileCard`, `EmptyState`. `F:src/app/sender/advisor/page.tsx:L3-L45` | Advisor profile page with empty state when none assigned. `F:src/app/sender/advisor/page.tsx:L30-L45` |
| `/sender/escrows` | sender | Requires authenticated session enforced by sender layout. `F:src/app/sender/layout.tsx:L22-L52` | `sender`, `both`. `F:src/app/sender/layout.tsx:L28-L52` | Sender layout guard. `F:src/app/sender/layout.tsx:L3-L55` | `useSenderEscrows`, `SenderEscrowList`, `Select`, `Button`, `Card`. `F:src/app/sender/escrows/page.tsx:L7-L102` | Escrow list with status filter, pagination, and link to creation. `F:src/app/sender/escrows/page.tsx:L57-L99` |
| `/sender/escrows/create` | sender | Requires authenticated session enforced by sender layout. `F:src/app/sender/layout.tsx:L22-L52` | `sender`, `both`. `F:src/app/sender/layout.tsx:L28-L52` | Sender layout guard. `F:src/app/sender/layout.tsx:L3-L55` | `useCreateEscrow`, `Card`, `Input`, `Button`, `ErrorAlert`. `F:src/app/sender/escrows/create/page.tsx:L5-L108` | Create escrow form collecting amount, currency, description. `F:src/app/sender/escrows/create/page.tsx:L46-L109` |
| `/sender/escrows/[id]` | sender | Requires authenticated session enforced by sender layout. `F:src/app/sender/layout.tsx:L22-L52` | `sender`, `both`. `F:src/app/sender/layout.tsx:L28-L52` | Sender layout guard. `F:src/app/sender/layout.tsx:L3-L55` | `SenderEscrowDetails`, `ProofForm`, `useSenderEscrowSummary`, funding/proof action hooks. `F:src/app/sender/escrows/[id]/page.tsx:L8-L430` | Escrow detail with funding, approvals/rejections, proof submission, advisor review requests. `F:src/app/sender/escrows/[id]/page.tsx:L171-L429` |
| `/sender/escrows/[id]/milestones` | sender | Requires authenticated session enforced by sender layout. `F:src/app/sender/layout.tsx:L22-L52` | `sender`, `both`. `F:src/app/sender/layout.tsx:L28-L52` | Sender layout guard. `F:src/app/sender/layout.tsx:L3-L55` | `useEscrowMilestones`, `Badge`, `Card`, `Button`. `F:src/app/sender/escrows/[id]/milestones/page.tsx:L10-L139` | Milestone list with refresh controls and links to milestone detail. `F:src/app/sender/escrows/[id]/milestones/page.tsx:L63-L136` |
| `/sender/escrows/[id]/milestones/[milestoneId]` | sender | Requires authenticated session enforced by sender layout. `F:src/app/sender/layout.tsx:L22-L52` | `sender`, `both`. `F:src/app/sender/layout.tsx:L28-L52` | Sender layout guard. `F:src/app/sender/layout.tsx:L3-L55` | `useMilestoneDetail`, `Badge`, `Card`, `Button`. `F:src/app/sender/escrows/[id]/milestones/[milestoneId]/page.tsx:L5-L100` | Milestone detail with refresh/back actions. `F:src/app/sender/escrows/[id]/milestones/[milestoneId]/page.tsx:L61-L100` |
| `/sender/profile` | sender | Requires authenticated session enforced by sender layout. `F:src/app/sender/layout.tsx:L22-L52` | `sender`, `both`. `F:src/app/sender/layout.tsx:L28-L52` | Sender layout guard. `F:src/app/sender/layout.tsx:L3-L55` | `useAuthMe` for profile data. `F:src/app/sender/profile/page.tsx:L3-L67` | Profile details (email, username, role, payout channel, status). `F:src/app/sender/profile/page.tsx:L32-L69` |
